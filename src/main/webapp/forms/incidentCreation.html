<h3>Incident Creation </h3>
<form role="form"
   name="variablesForm">
   <script cam-script type="text/form-script">
   
		function submitSelects(varName)
		{
			 
			  // set value in variable manager so that it can be sent to backend
			  var e = document.getElementById(varName);
			  var strVal = e.options[e.selectedIndex].value;
			  console.log("IncidentCreation_submit: set '" + varName + "' with value: " + strVal);
			  //camForm.variableManager.variableValue(varName, strVal);		
			   camForm.variableManager.destroyVariable(varName);
			   camForm.variableManager.createVariable({name: varName ,type:'String',value:strVal});
		
		}
		
		function chooseSelect(varName)
		{
			  var val = camForm.variableManager.variableValue(varName);
			  var e = document.getElementById(varName);
			  e.options[e.selectedIndex].value = val;
			  console.log("IncidentCreation_choose: set '" + varName + "' with value: " + val);
		}
      camForm.on('form-loaded', function() {
            camForm.variableManager.fetchVariable('impact');
            camForm.variableManager.fetchVariable('priority');
            camForm.variableManager.fetchVariable('affectedApplication');
      });
      camForm.on('variables-restored', function() {
            
			/*chooseSelect("impact");
			chooseSelect("priority");
			chooseSelect("affectedApplication");*/
      });
      camForm.on('submit', function(evt) {
		submitSelects("priority");
		submitSelects("impact");
		submitSelects("affectedApplication");
      });
      
   </script>   
   <div class="row">
      <div class="col-xs-6">
         <h2>Please provide some information about your Incident.</h2>
         <!-- Priority -->
         <div class="form-group">
            <label for="priority">Priority</label>
            <div class="controls">
               <select id="priority"  name="priority">
                  <option value="1">1 - High</option>
                  <option value="2">2 - Medium</option>
                  <option value="3">3 - Low</option>
               </select>
            </div>
         </div>
         <!-- Affected Application -->
         <div class="form-group">
            <label for="affectedApplication">Affected Application</label>
            <div class="controls">
               <select id="affectedApplication" name="affectedApplication">
                  <option>none</option>
                  <option>Excel</option>
                  <option>Word</option>
                  <option>Lotus Notes</option>
                  <option>Outlook</option>
                  <option>Website</option>
                  <option>SAP</option>
               </select>
            </div>
         </div>
          <!-- Impact -->
         <div class="form-group">
             <label for="summary">Impcat</label>
             <div class="controls">
            <select name="impact" id="impact">
               <option value="1">1 - Critical</option>
               <option value="2">2 - High</option>
               <option value="3">3 - Medium</option>
               <option value="4">4 - Low</option>
            </select>
         </div>
         <!-- Summary -->
         <div class="form-group">
            <label for="summary">Summary</label>
            <div class="controls">
               <textarea class="form-control mytext" cam-variable-type="String" required cam-variable-name="summary" name="summary" placeholder="Please describe your issue here"></textarea>
            </div>
         </div>
         <!-- Description of Issue -->
         <div class="form-group">
            <label for="description">Description of Issue</label>
            <div class="controls">
               <textarea class="form-control mytext" cam-variable-type="String" required cam-variable-name="description" name="description" placeholder="Please describe your issue here"></textarea>
            </div>
         </div>
      </div>
      <!-- close col div -->
      <div class="col-xs-6">
         <h2>Please provide some information about you.</h2>
         <!-- Customer Name  -->
         <div class="form-group">
            <label for="customerMail">Customer Name</label>
            <div class="controls">
               <input type="text" class="form-control mytext" cam-variable-type="String" required cam-variable-name="customerName" name="customerName" placeholder="Please enter yuor name here" />
            </div>
         </div>
         <!-- E-Mail -->
         <div class="form-group">
            <label for="customerMail">E-Mail</label>
            <div class="controls">
               <input type="text" class="form-control mytext" cam-variable-type="String" required cam-variable-name="customerMail" name="customerName" placeholder="email@domain.com" />
            </div>
         </div>
         <!-- Customer Phone -->
         <div class="form-group">
            <label for="customerMail">Customer Phone</label>
            <div class="controls">
               <input type="text" class="form-control mytext" cam-variable-type="String" required cam-variable-name="customerPhone" name="Customer Phone Adress" placeholder="Please enter your phone number" />
            </div>
         </div>
      </div>
      <!-- col-xs-6 -->
   </div>
   <!-- row -->
</form>